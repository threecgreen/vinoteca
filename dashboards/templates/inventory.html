{% extends 'base.html' %}
{% load humanize %}

{% block body %}
  <div class="container">
    <div class="row">
      <div class="col s12">
        <h3 class="page-title">Current Inventory</h3>
        {% if not inventory %}
          <h6 class="bold center-align">
            Your inventory is current empty.
          </h6>
          {% include "add_wine_btn.html" %}
        {% else %}
        <table class="responsive highlight condensed">
          <thead>
            <tr>
              <th>Modify</th>
              <th class="num-col">Quantity</th>
              <th>Color</th>
              <th>Name and Type</th>
              <th>Producer</th>
              <th>Region</th>
              <th class="num-col">Vintage</th>
              <th class="num-col">Purchase Date</th>
            </tr>
          </thead>
          <tbody>
          {% for wine in inventory %}
            <tr>
              <td>
                <a class="waves-effect waves-light btn-floating btn-floating-small light-green lighten-2" href="{% url "Wines:Change Inventory from Inventory" wine_id=wine.wine_id sign="add" %}">
                  <i class="material-icons">add_circle</i>
                </a>
                <a class="waves-effect waves-light btn-floating btn-floating-small pink darken-3" href="{% url "Wines:Change Inventory from Inventory" wine_id=wine.wine_id sign="subtract" %}">
                  <i class="material-icons">do_not_disturb_on</i>
                </a>
              </td>
              <td class="num-col">
                {{ wine.inventory_cnt }}
              </td>
              <td>
                {{ wine.color|title }}
              </td>
              <td>
                <a href="{% url 'Wines:Wine Profile' wine_id=wine.wine_id %}">
                  {{ wine.name|default_if_none:"" }} {{ wine.type }}
                </a>
              </td>
              <td>
                {% if wine.producer_id %}
                  <a href="{% url "Producers:Producer Profile" producer_id=wine.producer_id %}">
                    {{ wine.producer }}
                  </a>
                {% elif %}
                  {{ wine.producer }}
                {% endif %}
              </td>
              <td>
                {% if wine.region_id %}
                  <a href="{% url "Region Profile" region_id=wine.region_id %}">
                    {{ wine.region }}
                  </a>
                {% elif %}
                  {{ wine.region }}
                {% endif %}
              </td>
              <td class="num-col">
                {{ wine.vintage|default_if_none:"NV" }}
              </td>
              {% if wine.last_purchase_date %}
                <td class="num-col"><a href="{% url "Wines:Wine Profile" wine_id=wine.wine_id %}">{{ wine.last_purchase_date|naturalday:"b j, Y"|title }}</a></td>
              {% else %}
                <td><a href="{% url "Wines:Wine Profile" wine_id=wine.wine_id %}">&ndash;</a></td>
              {% endif %}
            </tr>
          {% empty %}
          {% endfor %}
          </tbody>
        </table>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}
