{% extends 'wine_profile_base.html' %}
{% block add_body %}
    <div class="row">
        <div class="col s12">
            <h4>New Purchase</h4>
            <form action="" method="post" autocomplete="off">
                {% csrf_token %}
                <div class="row">
                    <div class="input-field col s6 m3">
                        <input id="purchase-date" name="purchase-date" type="text" class="datepicker" required>
                        <label for="purchase-date">Purchase Date</label>
                    </div>
                    <div class="input-field col s6 m3">
                        <input id="quantity" name="quantity" type="number" class="validate" required>
                        <label for="quantity">Quantity</label>
                    </div>
                    <div class="input-field col s6 m3">
                        <input id="price" name="price" type="number" class="validate" step="0.01">
                        <label for="price">Price</label>
                    </div>
                    <div class="input-field col s6 m3">
                        <input id="vintage" name="vintage" type="number" class="validate" value="{{ default_vintage }}" %}">
                        <label for="vintage">Vintage</label>
                    </div>
                    <div class="input-field col s12 m4">
                        <input type="text" id="auto-store" name="store" class="autocomplete">
                        <label for="auto-store">Store</label>
                    </div>
                    <div class="input-field col s12 m4">
                        <input type="text" id="why" name="why" class="validate">
                        <label for="why">Why</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12">
                        <button class="btn waves-effect waves-light light-green lighten-2" type="submit" name="action">
                            Submit<i class="material-icons right">send</i>
                        </button>
                        <a class="waves-effect waves-light btn pink darken-3" href={% url "Wine Profile" wine_id=wine.id %}>cancel</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
{% block js %}
    <script type="text/javascript">
        $(function() {
            $('.datepicker').pickadate({
                selectMonths: true,             {# Creates a dropdown to control month #}
                selectYears: 15,                {# Creates a dropdown of 5 years to control year #}
                today: 'Today',
                clear: 'Clear',
                close: 'Ok',
                closeOnSelect: false,           {# Close upon selecting a date #}
            });
            $('#auto-store').autocomplete({
                data: {
                    {% for store in stores %}
                        "{{ store.name }}": null,
                    {% endfor %}
                },
                limit: 5,
                minLength: 1
            });
        });
    </script>
{% endblock %}
